<?xml version="1.0" encoding="UTF-8"?>
<ContentPage 
	xmlns="http://xamarin.com/schemas/2014/forms" 
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	xmlns:local="clr-namespace:Borgarverk;assembly=Borgarverk" 
	x:Class="Borgarverk.EntryListPage"
	Title="Allar Færslur" 
	BackgroundColor="White"
	x:Name="EntryList">
	<ContentPage.Content>
		<Grid VerticalOptions="FillAndExpand" Padding="0,10,0,30">
			<Grid.RowDefinitions>
				<RowDefinition Height="30"/>
				<RowDefinition Height="30"/>
				<RowDefinition Height="500"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="150"/>
				<RowDefinition Height="70"/>
			</Grid.RowDefinitions>
			<SearchBar Placeholder="Leita..." VerticalOptions="EndAndExpand" TextChanged="SearchBar_OnTextChanged" HeightRequest="35" Grid.Row="0"></SearchBar>
			<BoxView BackgroundColor="#bfbfbf" Grid.Row="1"/>
			<Grid HeightRequest="35" Grid.Row="1" Padding="30,0,30,0">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="3*"/>
	             	<ColumnDefinition Width="3*"/>
	             	<ColumnDefinition Width="2*"/>
	             	<ColumnDefinition Width="3*"/>
	             	<ColumnDefinition Width="2*"/>
	             	<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>
				<Label Grid.Column="0" VerticalOptions="Center">Dags</Label>
				<Label Grid.Column="1" VerticalOptions="Center">Nótunúmer</Label>
				<Label Grid.Column="2" VerticalOptions="Center">Bíll</Label>
				<Label Grid.Column="3" VerticalOptions="Center">Stöð</Label>
				<Label Grid.Column="4" VerticalOptions="Center">Flatarmál</Label>
				<Label Grid.Column="5" VerticalOptions="Center" HorizontalOptions="EndAndExpand">Sent</Label>
			</Grid>
			
			<ListView ItemsSource="{Binding AllEntries}" HorizontalOptions="Center" RowHeight="40" Grid.Row="2">
				<ListView.ItemTemplate>
					<DataTemplate>
						<ViewCell>
							<ViewCell.ContextActions>
            					<MenuItem Command="{Binding Path=BindingContext.ModifySelectedEntryCommand, Source={x:Reference Name=EntryList}}" CommandParameter="{Binding .}" Text="Meira" />
            					<MenuItem Command="{Binding Path=BindingContext.DeleteSelectedEntryCommand, Source={x:Reference Name=EntryList}}" CommandParameter="{Binding .}" Text="Eyða"/>
         					</ViewCell.ContextActions>
							<ViewCell.View>
								<Grid Padding="30,0,30,0">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="3*"/>
										<ColumnDefinition Width="3*"/>
										<ColumnDefinition Width="2*"/>
										<ColumnDefinition Width="3*"/>
										<ColumnDefinition Width="2*"/>
										<ColumnDefinition Width="*"/>
									</Grid.ColumnDefinitions>
										<Label Grid.Column="0" Text="{Binding TimeCreated, StringFormat='{0:d MMMM, yyyy}'}" VerticalOptions="Center"/>
										<Label Grid.Column="1" Text="{Binding No}" VerticalOptions="Center"/>
										<Label Grid.Column="2" Text="{Binding Car}" VerticalOptions="Center"/>
										<Label Grid.Column="3" Text="{Binding Station}" VerticalOptions="Center"/>
					                	<Label Grid.Column="4" Text="{Binding RoadArea}" VerticalOptions="Center"/>
					                	<Image Grid.Column="5" Source="icon_done.png"  IsVisible="{Binding Sent}" HeightRequest="15" HorizontalOptions="End" Margin="10" VerticalOptions="Center"/>
								</Grid>
							</ViewCell.View>
						</ViewCell>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
			<Grid Grid.Row="4" HeightRequest="200" Padding="30,0,30,0" IsVisible="{Binding IsSelected}">
				<Grid.RowDefinitions>
					<RowDefinition Height="2" />
					<RowDefinition Height="40" />
					<RowDefinition Height="40" />
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="45"/>
					<ColumnDefinition Width="50"/>
					<ColumnDefinition Width="70"/>
					<ColumnDefinition Width="50"/>
					<ColumnDefinition Width="70"/>
					<ColumnDefinition Width="120"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>
				<BoxView BackgroundColor="#00447b" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="7"/>
				<Label Grid.Row="1" Grid.Column="0">Breidd:</Label>
				<Label Grid.Row="1" Grid.Column="2">Lengd:</Label>
				<Label Grid.Row="1" Grid.Column="4">Flatarmál:</Label>
				<Label Grid.Row="2" Grid.Column="0">Lítrar:</Label>
				<Label Grid.Row="2" Grid.Column="2">Lítrar/fermeter:</Label>
				<Label Grid.Row="2" Grid.Column="4">Sent þann:</Label>
				<Label Grid.Row="1" Grid.Column="1" Text="{Binding SelectedEntry.RoadWidth}"/>
				<Label Grid.Row="1" Grid.Column="3" Text="{Binding SelectedEntry.RoadLength}"/>
				<Label Grid.Row="1" Grid.Column="5" Text="{Binding SelectedEntry.RoadArea}"/>
				<Label Grid.Row="2" Grid.Column="1" Text="{Binding SelectedEntry.TarQty}"/>
				<Label Grid.Row="2" Grid.Column="3" Text="{Binding SelectedEntry.Rate}"/>
				<Label Grid.Row="2" Grid.Column="5" Text="{Binding SelectedEntry.TimeSent, StringFormat='{0:d MMMM, yyyy}'}}"/>
				<Button BackgroundColor="White" Grid.Row="1" Grid.Column="6" Image="icon_edit.png"></Button>
				<Button BackgroundColor="White" Grid.Row="2" Grid.Column="6" Command="{Binding CloseCommand}" Image="ic_close_black_24dp"></Button>
			</Grid>
			<StackLayout Orientation="Horizontal" Grid.Row="5" Padding="30,0,30,0">
				<Button x:Name="DeleteSelectedEntriesButton" 
					Image="icon_delete.png" 
					Text="Eyða öllum færslum" 
					TextColor="White" 
					BackgroundColor="#008ead" 
					Grid.Row="0" 
					WidthRequest="250" 
					HeightRequest="70" 
					HorizontalOptions="CenterAndExpand" 
					Command="{Binding DeleteSelectedEntriesCommand}"
				/>

				<Button x:Name="SendAllEntriesButton" 
					Image="icon_send.png" 
					Text="Senda ósendar færslur" 
					TextColor="White" 
					BackgroundColor="#eca400" 
					Grid.Row="0" 
					WidthRequest="250" 
					HeightRequest="70" 
					HorizontalOptions="CenterAndExpand" 
					Command="{Binding SendAllEntriesCommand}"
				/>
			</StackLayout>
		</Grid>
	</ContentPage.Content>
</ContentPage>
